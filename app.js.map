{"version":3,"sources":["app.js","datepicker-ru.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["window.$ = window.jQuery = require('jquery');\r\nwindow.$ = $.extend(require('jquery-ui-bundle'));\r\nvar dt = require('datatables');\r\n\r\n\r\n$(document).ready(function () {\r\n\r\n\r\n\t// BEGIN Menu\r\n\tconst menu = $('#menu');\r\n\tconst menu_icon = $('.menu_icon');\r\n\r\n\t$('#menu_btn').click(function() {\r\n\t\tmenu.slideToggle();\r\n\t\tmenu_icon.toggleClass('open');\r\n\t});\r\n\t// END Menu\r\n\r\n\r\n\r\n\t// BEGIN Turn off hover effects on touch screens. BEGIN\r\n\tconst isTouchDevice = function() {\r\n\t\treturn ('ontouchstart' in window) || navigator.maxTouchPoints;\r\n\t}\r\n\r\n\tif ( isTouchDevice() == false ) {\r\n\t\t$('body').addClass('no-touch');\r\n\t}\r\n\t// END Turn off hover effects on touch screens. END\r\n\r\n\r\n\r\n\t// BEGIN Post request function BEGIN\r\n\tconst post = function(path, method, parameters) {\r\n\t\tlet form = $('<form></form>');\r\n\r\n\t\tform.attr(\"method\", method);\r\n\t\tform.attr(\"action\", path);\r\n\r\n\t\t$.each(parameters, function(key, value) {\r\n\t\t\tlet field = $('<input></input>');\r\n\r\n\t\t\tfield.attr(\"type\", \"hidden\");\r\n\t\t\tfield.attr(\"name\", key);\r\n\t\t\tfield.attr(\"value\", value);\r\n\r\n\t\t\tform.append(field);\r\n\t\t});\r\n\r\n\t\t// The form needs to be a part of the document in\r\n\t\t// order for us to be able to submit it.\r\n\t\t$(document.body).append(form);\r\n\t\tform.submit();\r\n\t}\r\n\t// END Post request function END\r\n\r\n\r\n\r\n\t// $('.card_number').inputmask(\"9999-9999-9999-9999\");\r\n\t// $('.money').inputmask('9{*}.9{2}');\r\n\t// $('new-').\r\n\r\n\r\n\t// BEGIN Initialization of datepicker BEGIN\r\n\t$(function() {\r\n\t\t$('.card_date').datepicker({\r\n\t\t\tdateFormat: \"yy/mm\",\r\n\t\t\tchangeMonth: true,\r\n\t\t\tchangeYear: true,\r\n\t\t\tyearRange: \"-5:+5\",\r\n\t\t\tshowButtonPanel: true,\r\n\t\t\tonClose: function(dateText, inst) {\r\n\t\t\t\tfunction isDonePressed(){\r\n\t\t\t\t\treturn ($('#ui-datepicker-div').html().indexOf('ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all ui-state-hover') > -1);\r\n\t\t\t\t}\r\n\t\t\t\tif (isDonePressed()){\r\n\t\t\t\t\tvar month = $(\"#ui-datepicker-div .ui-datepicker-month :selected\").val();\r\n\t\t\t\t\tvar year = $(\"#ui-datepicker-div .ui-datepicker-year :selected\").val();\r\n\t\t\t\t\t$(this).datepicker('setDate', new Date(year, month, 1)).trigger('change');\r\n\t\t\t\t\t$('.date-picker').focusout()//Added to remove focus from datepicker input box on selecting date\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeShow : function(input, inst) {\r\n\t\t\t\tinst.dpDiv.addClass('month_year_datepicker')\r\n\t\t\t\tif ((datestr = $(this).val()).length > 0) {\r\n\t\t\t\t\tyear = datestr.substring(datestr.length-4, datestr.length);\r\n\t\t\t\t\tmonth = datestr.substring(0, 2);\r\n\t\t\t\t\t$(this).datepicker('option', 'defaultDate', new Date(year, month-1, 1));\r\n\t\t\t\t\t$(this).datepicker('setDate', new Date(year, month-1, 1));\r\n\t\t\t\t\t$(\".ui-datepicker-calendar\").hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('.pick_date').datepicker({\r\n\t\t\tdateFormat: \"yy-mm-dd\",\r\n\t\t\tchangeDay: true,\r\n\t\t\tchangeMonth: true,\r\n\t\t\tchangeYear: true,\r\n\t\t\tyearRange: \"-5:+5\",\r\n\t\t\tshowButtonPanel: false\r\n\t\t});\r\n\r\n\t\t$('.pick_birthday').datepicker({\r\n\t\t\tdateFormat: \"yy-mm-dd\",\r\n\t\t\tchangeDay: true,\r\n\t\t\tchangeMonth: true,\r\n\t\t\tchangeYear: true,\r\n\t\t\tyearRange: \"-70:+0\",\r\n\t\t\tshowButtonPanel: false\r\n\t\t});\r\n\r\n\t});\r\n\t// END Initialization of datepicker END\r\n\r\n\r\n\t// BEGIN Make 2 decimals for money value BEGIN\r\n\t$('.money_input').on('blur', function () {\r\n\t\tlet money = $(this).val();\r\n\t\tmoney = Number.parseFloat(money);\r\n\t\tmoney = (money).toFixed(2);\r\n\t\t$(this).val(money);\r\n\t});\r\n\t// END Make 2 decimals for money value END\r\n\r\n\r\n\t// BEGIN Current exchange rate BEGIN\r\n\tconst NBU_rate = 'https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?json';\r\n\tlet current_rate = 1;\r\n\r\n\tconst checkExchangeRate = () => {\r\n\t\tlet currency = $('#card option:selected').attr('title');\r\n\t\tif (currency === 'USD') {\r\n\t\t\t$('#rate').val(1);\r\n\t\t} else {\r\n\r\n\t\t\tif (currency === 'UAH') {\r\n\t\t\t\t$.getJSON(NBU_rate, function(result){\r\n\t\t\t\t\t$.each(result, function(i, field){\r\n\t\t\t\t\t\tif (field.r030 === 840) {\r\n\t\t\t\t\t\t\t$('#rate').val( (1/field.rate).toFixed(6) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}).fail( function () {\r\n\t\t\t\t\t$('#rate').val(0);\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tif (currency === 'EUR') {\r\n\t\t\t\t$.getJSON(NBU_rate, function(result){\r\n\t\t\t\t\tlet USD = 1, EUR = 1;\r\n\t\t\t\t\t$.each(result, function(i, field){\r\n\t\t\t\t\t\tif (field.r030 === 840) {\r\n\t\t\t\t\t\t\tUSD = field.rate;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (field.r030 === 978) {\r\n\t\t\t\t\t\t\tEUR = field.rate;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('#rate').val( (EUR/USD).toFixed(6) );\r\n\t\t\t\t}).fail( function () {\r\n\t\t\t\t\t$('#rate').val(0);\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tif (currency === 'RUB') {\r\n\t\t\t\t$.getJSON(NBU_rate, function(result){\r\n\t\t\t\t\tlet USD = 1, RUB = 1;\r\n\t\t\t\t\t$.each(result, function(i, field){\r\n\t\t\t\t\t\tif (field.r030 === 840) {\r\n\t\t\t\t\t\t\tUSD = field.rate;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (field.r030 === 643) {\r\n\t\t\t\t\t\t\tRUB = field.rate;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('#rate').val( (RUB/USD).toFixed(6) );\r\n\t\t\t\t}).fail( function () {\r\n\t\t\t\t\t$('#rate').val(0);\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t$('#get_rate').on('click', checkExchangeRate);\r\n\t$('select#card').on('change', checkExchangeRate);\r\n\tcheckExchangeRate();\r\n\t// END Current exchange rate END\r\n\r\n\r\n\r\n\t// BEGIN Multiple checkbox selection BEGIN\r\n    // let $chkboxes = $('.shift_select');\r\n    // let lastChecked = null;\r\n\r\n    // $chkboxes.click(function(e) {\r\n    //     if(!lastChecked) {\r\n    //         lastChecked = this;\r\n    //         return;\r\n    //     }\r\n\r\n    //     if(e.shiftKey) {\r\n    //         let start = $chkboxes.index(this);\r\n    //         let end = $chkboxes.index(lastChecked);\r\n\r\n    //         $chkboxes.slice(Math.min(start,end), Math.max(start,end)+ 1).prop('checked', lastChecked.checked);\r\n\r\n    //     }\r\n\r\n    //     lastChecked = this;\r\n    // });\r\n\t// END Multiple checkbox selection END\r\n\r\n\r\n\t// BEGIN Select all checkboxes in table BEGIN\r\n\tconst selectManyCheckboxes = function () {\r\n\r\n\t\tlet form = $(this).closest('form');\r\n\t\tlet all_checkbxs = form.find(\"input[type='checkbox']\");\r\n\r\n\t\tif ( $(this).prop('checked') === false ) {\r\n\t\t\tall_checkbxs.prop('checked', false);\r\n\t\t} else {\r\n\t\t\tall_checkbxs.prop('checked', true);\r\n\t\t}\r\n\r\n\t\treturn all_checkbxs;\r\n\t}\r\n\r\n\t$('.table').on('click', '.all_select', selectManyCheckboxes);\r\n\t// END Select all checkboxes in table END\r\n\r\n\r\n\r\n\t// BEGIN tables\r\n\t$('.js-table').DataTable();\r\n\t$('#tokens_list').DataTable();\r\n\t// END tables\r\n\r\n\r\n\t// BEGIN tables\r\n\t// $('.modal_token').modal();\r\n\t// END tables\r\n\r\n\t// BEGIN Delete resource request BEGIN\r\n\t$('.js-form').on('click', '.remove-btn', function (e) {\r\n\t\te.preventDefault();\r\n\t\tlet url = $(this).attr('href');\r\n\t\tlet form = $('.js-form').attr({\r\n\t\t\t'action':url\r\n\t\t});\r\n\t\tlet token = $(form).find('#token').val();\r\n\t\tlet deleteInput = $('<input>').attr({\r\n\t\t\t'type' : 'hidden',\r\n\t\t\t'name' : '_method',\r\n\t\t\t'value' : 'delete'\r\n\t\t});\r\n\t\t$(form).append(deleteInput);\r\n\t\t$(form).submit();\r\n\t});\r\n\t// END Delete resource request END\r\n\r\n\r\n\r\n\t// BEGIN Delete resource request BEGIN\r\n\t$('.js-submit').on('click', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\t\tlet form = $('.js-form');\r\n\t\tlet action = $('.js-action').val();\r\n\r\n\t\tform.submit();\r\n\r\n\t});\r\n\t// END Delete resource request END\r\n\r\n\r\n\r\n\t// BEGIN Multiple assignment of cards  BEGIN\r\n\tconst users_select = $('.js-users');\r\n\tusers_select.hide();\r\n\r\n\t$('.js-action').change(function () {\r\n\t\tif ( $(this).val() == '1' ) {\r\n\t\t\tusers_select.show();\r\n\t\t} else {\r\n\t\t\tusers_select.hide();\r\n\t\t}\r\n\t\t\t\r\n\t});\r\n\t// END Multiple assignment of cards  END\r\n\r\n\r\n\r\n});","/* Russian (UTF-8) initialisation for the jQuery UI date picker plugin. */\r\n/* Written by Andrew Stromnov (stromnov@gmail.com). */\r\n( function( factory ) {\r\n\tif ( typeof define === \"function\" && define.amd ) {\r\n\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine( [ \"../widgets/datepicker\" ], factory );\r\n\t} else {\r\n\r\n\t\t// Browser globals\r\n\t\tfactory( jQuery.datepicker );\r\n\t}\r\n}( function( datepicker ) {\r\n\r\n\tdatepicker.regional.ru = {\r\n\t\tcloseText: \"Выбрать\",\r\n\t\tprevText: \"&#x3C;Пред\",\r\n\t\tnextText: \"След&#x3E;\",\r\n\t\tcurrentText: \"Сегодня\",\r\n\t\tmonthNames: [ \"Январь\",\"Февраль\",\"Март\",\"Апрель\",\"Май\",\"Июнь\",\r\n\t\t\"Июль\",\"Август\",\"Сентябрь\",\"Октябрь\",\"Ноябрь\",\"Декабрь\" ],\r\n\t\tmonthNamesShort: [ \"Янв\",\"Фев\",\"Мар\",\"Апр\",\"Май\",\"Июн\",\r\n\t\t\"Июл\",\"Авг\",\"Сен\",\"Окт\",\"Ноя\",\"Дек\" ],\r\n\t\tdayNames: [ \"воскресенье\",\"понедельник\",\"вторник\",\"среда\",\"четверг\",\"пятница\",\"суббота\" ],\r\n\t\tdayNamesShort: [ \"вск\",\"пнд\",\"втр\",\"срд\",\"чтв\",\"птн\",\"сбт\" ],\r\n\t\tdayNamesMin: [ \"Вс\",\"Пн\",\"Вт\",\"Ср\",\"Чт\",\"Пт\",\"Сб\" ],\r\n\t\tweekHeader: \"Нед\",\r\n\t\tdateFormat: \"dd.mm.yy\",\r\n\t\tfirstDay: 1,\r\n\t\tisRTL: false,\r\n\t\tshowMonthAfterYear: false,\r\n\t\tyearSuffix: \"\" };\r\n\tdatepicker.setDefaults( datepicker.regional.ru );\r\n\r\n\treturn datepicker.regional.ru;\r\n\r\n}));"]}